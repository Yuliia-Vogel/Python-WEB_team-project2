1. –ü—Ä–∏–º—É—Å–æ–≤–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ Cloudinary
–î–µ—è–∫—ñ —Ñ–∞–π–ª–∏ –º–æ–∂—É—Ç—å –Ω–µ –≤–∏–¥–∞–ª—è—Ç–∏—Å—è —á–µ—Ä–µ–∑ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —É Cloudinary. –î–ª—è resource_type="raw" –º–æ–∂–Ω–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –ø—Ä–∏–º—É—Å–æ–≤–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è (invalidate=True), —è–∫–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–µ—à–æ–≤–∞–Ω—ñ –∫–æ–ø—ñ—ó —Ç–µ–∂ –±—É–¥—É—Ç—å –≤–∏–¥–∞–ª–µ–Ω—ñ.

üîπ –û–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤ CloudinaryService:

python
–ö–æ–ø—ñ—é–≤–∞—Ç–∏
–†–µ–¥–∞–≥—É–≤–∞—Ç–∏
import cloudinary.api

class CloudinaryService:
    @staticmethod
    def delete_file(public_id, resource_type="raw"):
        try:
            print(f"Services. Attempting to delete file with : {public_id}")
            response = cloudinary.api.delete_resources(
                [public_id], resource_type=resource_type, invalidate=True
            )
            print(f"Services. Cloudinary delete response: {response}")
            return response
        except cloudinary.api.NotFound:
            print(f"Services. File not found on Cloudinary: {public_id}")
            return None  # –ü—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ None, —â–æ–± –Ω–µ –ø–∞–¥–∞–ª–æ –∑ 500
        except Exception as e:
            print(f"Services. Unexpected error while deleting {public_id}: {e}")
            return None
‚úÖ –¶–µ –ø—Ä–∏–º—É—Å–æ–≤–æ –≤–∏–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª —ñ –π–æ–≥–æ –∫–µ—à–æ–≤–∞–Ω—ñ –∫–æ–ø—ñ—ó.

2. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
–©–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –æ—Ç—Ä–∏–º—É–≤–∞–≤ 500 Internal Server Error, –¥–æ–¥–∞–º–æ –æ–±—Ä–æ–±–∫—É —É views.py.

üîπ –û–Ω–æ–≤–∏ views.py (—Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É):

python
–ö–æ–ø—ñ—é–≤–∞—Ç–∏
–†–µ–¥–∞–≥—É–≤–∞—Ç–∏
from django.shortcuts import render, redirect
from django.contrib import messages
from files.services import CloudinaryService
from files.models import UploadedFile

def delete_file_view(request, file_id):
    file = UploadedFile.objects.get(id=file_id)
    public_id = file.public_id
    resource_type = file.resource_type

    if CloudinaryService.delete_file(public_id, resource_type) is None:
        messages.error(
            request,
            "–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —Ñ–∞–π–ª–∞ –∑ —Ö–º–∞—Ä–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞. "
            "–ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–æ–¥–∞—Ç–∫–∞ Personal Assistant:<br><br>"
            "<b>Yuliia Melnychenko: arwen.vogel@gmail.com</b><br>"
            "VladPetrychuk: vladyslav.petrychuk42@gmail.com<br>"
            "Kyrylo Dolia: fr1ghtn1ght2101@gmail.com<br>"
            "Vlad Hetman: vladislavgetman704@gmail.com<br>"
            "Oleksii Kozupytsia: sumyultras88@gmail.com"
        )
        return redirect("files_list")  # –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç

    file.delete()
    messages.success(request, "–§–∞–π–ª —É—Å–ø—ñ—à–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–æ.")
    return redirect("files_list")
‚úÖ –©–æ —Ç—É—Ç –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?

–Ø–∫—â–æ —Ñ–∞–π–ª –Ω–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏, –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ–º–µ–π–ª–∞–º–∏ –∫–æ–º–∞–Ω–¥–∏.
–¢–≤—ñ–π —ñ–º–µ–π–ª (arwen.vogel@gmail.com) –ø—ñ–¥—Å–≤—ñ—á—É—î—Ç—å—Å—è –∂–∏—Ä–Ω–∏–º —à—Ä–∏—Ñ—Ç–æ–º.
–Ø–∫—â–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ ‚Äì —Ñ–∞–π–ª —Ç–∞–∫–æ–∂ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ –±–∞–∑–∏.
–ó–∞–º—ñ—Å—Ç—å 500 –ø–æ–º–∏–ª–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
3. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç—ñ
–Ø–∫—â–æ –≤ —Ç–µ–±–µ —â–µ –Ω–µ–º–∞—î —à–∞–±–ª–æ–Ω—É –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –¥–æ–¥–∞–π —É base.html –∞–±–æ files_list.html:

html
–ö–æ–ø—ñ—é–≤–∞—Ç–∏
–†–µ–¥–∞–≥—É–≤–∞—Ç–∏
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message|safe }}</div>
  {% endfor %}
{% endif %}
‚úÖ –¶–µ –ø–æ–∫–∞–∂–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö –∞–±–æ –ø–æ–º–∏–ª–∫—É.

–ì–æ—Ç–æ–≤–æ! ‚úÖ
–¢–µ–ø–µ—Ä —Ñ–∞–π–ª–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –ø—Ä–∏–º—É—Å–æ–≤–æ, –∞ —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –∑—Ä–æ–∑—É–º—ñ–ª–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∫–æ–º–∞–Ω–¥–∏. üî•